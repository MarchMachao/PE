<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.vito.coding.check.mapper.StudentDao">
	<!-- 查询学生的数据根据学号 -->
	<select id="findStudentById" parameterType="String"
		resultType="StudentAndItsTeacher">
		SELECT
			a.id,
			a.`name`,
			a.gender,
			a.school,
			a.grade,
			a.state,
			a.classes,
			a.duration,
			a.state,
			a.teacher,
			b.subjectid,
			b.subjectname,
			b.teacher AS newTeacher,
			MAX(b.`year`) AS `year`
		FROM
			a_student a,
			a_teacher b
		WHERE
			a.id = #{id}
		AND b.studentid = #{id}
	</select>

	<!-- 查询数据 -->	
	
	<select id="findAllDataById" parameterType="String" resultType="data">
		select * from a_data where a_data.id = #{value} and a_data.first_check="已审核" and a_data.second_check="已审核" 
		order by a_data.year
	</select>
	
	<!-- 更新班级信息 -->
	<update id="updateData" parameterType="Student">
		update a_student
		<set>
			<if test="classes!=null">
				classes = #{classes},
			</if>
		</set>
		where id=#{id}
	</update>
	
</mapper>